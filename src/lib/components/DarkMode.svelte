<!-- Dark mode component -->

<script lang="ts">
	// Importing necessary dependencies
	import { browser } from '$app/environment';
	import { darktheme } from '$lib/store/store';

	// Initial dark mode state
	let darkMode = $state(false);

	// Function to handle switching between dark and light modes
	function handleSwitchDarkMode() {
		darkMode = !darkMode;
		darktheme.update(() => darkMode);
		// Saving the user's theme preference in local storage
		localStorage.setItem('theme', darkMode ? 'dark' : 'light');

		// Applying the dark mode style to the document element
		darkMode
			? document.documentElement.classList.add('dark')
			: document.documentElement.classList.remove('dark');
	}

	// Checking for browser environment
	if (browser) {
		// Checking local storage for the theme preference or using system preference
		if (
			localStorage.theme === 'dark' ||
			(!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
		) {
			// Applying dark mode if the condition is met
			document.documentElement.classList.add('dark');
			darkMode = true;
		} else {
			// Applying light mode if the condition is not met
			document.documentElement.classList.remove('dark');
			darkMode = false;
		}
	}
</script>

<button
	class="hover:bg-gray-600 hover:text-gray-200 active:bg-gray-200"
	onclick={handleSwitchDarkMode}
>
	{#if darkMode == false}
		<!-- SVG icon for light mode -->
		<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M13.8012 8.80181C13.4227 10.0375 12.664 11.1224 11.6332 11.902C10.7282 12.5831 9.65131 12.9986 8.52333 13.1016C7.39535 13.2047 6.26096 12.9914 5.2475 12.4855C4.23404 11.9797 3.38161 11.2015 2.78589 10.2381C2.19018 9.27471 1.87475 8.16437 1.87503 7.03169C1.87096 5.70962 2.30075 4.42271 3.09847 3.36841C3.87808 2.33763 4.96294 1.57899 6.19866 1.20044C6.28011 1.17537 6.36685 1.17296 6.44955 1.1935C6.53226 1.21403 6.6078 1.25672 6.66806 1.31698C6.72832 1.37724 6.77101 1.45278 6.79154 1.53549C6.81208 1.6182 6.80968 1.70494 6.7846 1.78638C6.51439 2.68019 6.49173 3.63056 6.71905 4.53622C6.94636 5.44189 7.41512 6.26892 8.07539 6.92919C8.73566 7.58945 9.56268 8.05822 10.4683 8.28553C11.374 8.51284 12.3244 8.49019 13.2182 8.21998C13.2996 8.1949 13.3864 8.1925 13.4691 8.21303C13.5518 8.23356 13.6273 8.27625 13.6876 8.33651C13.7479 8.39677 13.7905 8.47232 13.8111 8.55502C13.8316 8.63773 13.8292 8.72447 13.8041 8.80591L13.8012 8.80181Z"
				fill="black"
			/>
		</svg>
	{:else if darkMode == true}
		<!-- SVG icon for dark mode -->
		<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
			<g clip-path="url(#clip0_6763_6338)">
				<path
					d="M7.49931 11.875C7.65239 11.875 7.80014 11.9312 7.91454 12.0329C8.02894 12.1347 8.10202 12.2748 8.11993 12.4269L8.12431 12.5V13.125C8.12413 13.2843 8.06313 13.4375 7.95378 13.5534C7.84442 13.6692 7.69496 13.7389 7.53594 13.7482C7.37691 13.7576 7.22032 13.7058 7.09816 13.6036C6.976 13.5013 6.8975 13.3563 6.87868 13.1981L6.87431 13.125V12.5C6.87431 12.3342 6.94016 12.1753 7.05737 12.0581C7.17458 11.9408 7.33355 11.875 7.49931 11.875ZM11.4449 10.5687L11.5037 10.6206L11.9412 11.0581C12.0533 11.1706 12.1184 11.3215 12.1232 11.4802C12.128 11.639 12.0723 11.7936 11.9673 11.9127C11.8623 12.0318 11.7158 12.1064 11.5578 12.1215C11.3997 12.1366 11.2418 12.0909 11.1162 11.9937L11.0574 11.9419L10.6199 11.5044C10.5121 11.3967 10.4473 11.2533 10.4377 11.1013C10.4282 10.9492 10.4745 10.7988 10.568 10.6785C10.6615 10.5582 10.7958 10.4762 10.9456 10.4479C11.0953 10.4196 11.2502 10.447 11.3812 10.525L11.4449 10.5687ZM4.37868 10.6206C4.48629 10.7282 4.55094 10.8714 4.56049 11.0233C4.57004 11.1752 4.52384 11.3254 4.43056 11.4456L4.37868 11.5044L3.94118 11.9419C3.82871 12.054 3.67779 12.119 3.51907 12.1239C3.36035 12.1287 3.20574 12.073 3.08663 11.968C2.96753 11.8629 2.89287 11.7165 2.87781 11.5585C2.86275 11.4004 2.90843 11.2425 3.00556 11.1169L3.05743 11.0581L3.49493 10.6206C3.61214 10.5035 3.77108 10.4376 3.93681 10.4376C4.10254 10.4376 4.26148 10.5035 4.37868 10.6206ZM2.49931 6.875C2.65861 6.87518 2.81183 6.93617 2.92766 7.04553C3.0435 7.15489 3.1132 7.30435 3.12254 7.46337C3.13188 7.6224 3.08014 7.77899 2.97789 7.90114C2.87565 8.0233 2.73062 8.10181 2.57243 8.12062L2.49931 8.125H1.87431C1.71501 8.12482 1.56179 8.06383 1.44595 7.95447C1.33012 7.84511 1.26041 7.69565 1.25108 7.53663C1.24174 7.3776 1.29348 7.22101 1.39572 7.09885C1.49797 6.9767 1.643 6.89819 1.80118 6.87937L1.87431 6.875H2.49931ZM13.1243 6.875C13.2836 6.87518 13.4368 6.93617 13.5527 7.04553C13.6685 7.15489 13.7382 7.30435 13.7475 7.46337C13.7569 7.6224 13.7051 7.77899 13.6029 7.90114C13.5006 8.0233 13.3556 8.10181 13.1974 8.12062L13.1243 8.125H12.4993C12.34 8.12482 12.1868 8.06383 12.071 7.95447C11.9551 7.84511 11.8854 7.69565 11.8761 7.53663C11.8667 7.3776 11.9185 7.22101 12.0207 7.09885C12.123 6.9767 12.268 6.89819 12.4262 6.87937L12.4993 6.875H13.1243ZM3.88243 3.00625L3.94118 3.05812L4.37868 3.49562C4.49078 3.6081 4.55585 3.75902 4.5607 3.91774C4.56555 4.07646 4.5098 4.23107 4.40478 4.35017C4.29976 4.46928 4.15334 4.54394 3.99526 4.559C3.83718 4.57406 3.6793 4.52838 3.55368 4.43125L3.49493 4.37937L3.05743 3.94187C2.94999 3.83417 2.88552 3.69098 2.8761 3.53914C2.86668 3.38731 2.91297 3.23725 3.00628 3.1171C3.0996 2.99695 3.23353 2.91496 3.38298 2.88649C3.53242 2.85803 3.68711 2.88506 3.81806 2.9625L3.88243 3.00625ZM11.9412 3.05812C12.0488 3.16575 12.1134 3.30893 12.123 3.46082C12.1325 3.61272 12.0863 3.76287 11.9931 3.88312L11.9412 3.94187L11.5037 4.37937C11.3912 4.49147 11.2403 4.55655 11.0816 4.56139C10.9228 4.56624 10.7682 4.51049 10.6491 4.40547C10.53 4.30045 10.4554 4.15403 10.4403 3.99595C10.4252 3.83788 10.4709 3.67999 10.5681 3.55437L10.6199 3.49562L11.0574 3.05812C11.1746 2.94096 11.3336 2.87513 11.4993 2.87513C11.665 2.87513 11.824 2.94096 11.9412 3.05812ZM7.49931 1.25C7.65239 1.25002 7.80014 1.30622 7.91454 1.40795C8.02894 1.50967 8.10202 1.64984 8.11993 1.80187L8.12431 1.875V2.5C8.12413 2.6593 8.06313 2.81252 7.95378 2.92836C7.84442 3.04419 7.69496 3.1139 7.53594 3.12323C7.37691 3.13257 7.22032 3.08083 7.09816 2.97858C6.976 2.87634 6.8975 2.73131 6.87868 2.57312L6.87431 2.5V1.875C6.87431 1.70924 6.94016 1.55027 7.05737 1.43306C7.17458 1.31585 7.33355 1.25 7.49931 1.25ZM7.49931 4.375C8.11161 4.37496 8.71042 4.55481 9.22139 4.89219C9.73235 5.22957 10.1329 5.70962 10.3734 6.27273C10.6139 6.83583 10.6836 7.45717 10.574 8.05957C10.4643 8.66197 10.1801 9.21889 9.7567 9.66116C9.33325 10.1034 8.78921 10.4116 8.19214 10.5473C7.59507 10.683 6.97129 10.6403 6.39827 10.4245C5.82525 10.2088 5.32824 9.82942 4.96897 9.3336C4.6097 8.83778 4.40401 8.24735 4.37743 7.63562L4.37431 7.5L4.37743 7.36437C4.41238 6.55984 4.75656 5.79986 5.3382 5.24291C5.91983 4.68596 6.69402 4.37505 7.49931 4.375Z"
					fill="white"
				/>
			</g>
			<defs>
				<clipPath id="clip0_6763_6338">
					<rect width="15" height="15" fill="white" />
				</clipPath>
			</defs>
		</svg>
	{/if}
</button>
