import{t as U,a as _,c as ot}from"../chunks/XdHx9Q2R.js";import{p as S,f as Y,r as n,b as R,c as v,a as G,t as M,g as s,s as P,z as st,aj as tt,n as it,d as x}from"../chunks/CsqGFeDh.js";import{i as I}from"../chunks/9_3Cu2be.js";import{o as q}from"../chunks/BcPiOdGB.js";import{g as nt}from"../chunks/sqpubMME.js";import{s as F}from"../chunks/CEKie2dh.js";import{H as ct}from"../chunks/CoumpVV1.js";import{L as et}from"../chunks/BKUzuBl2.js";import{s as H}from"../chunks/C-G1gKjH.js";import{e as J,i as K}from"../chunks/B4K1HdnT.js";import{s as E}from"../chunks/CYIbFpwj.js";import{d as Q}from"../chunks/DCCTpnlQ.js";import{p as Z}from"../chunks/CcAKcgaM.js";import{a as lt,s as dt}from"../chunks/GeWgIBjc.js";import{w as pt}from"../chunks/1f2kWFSS.js";import{s as vt}from"../chunks/B2UR-Em7.js";import{c as ut}from"../chunks/Cu79Pbua.js";import{P as at}from"../chunks/DcZVe53u.js";import{j as rt,u as mt,g as ft}from"../chunks/0wNmbcRK.js";import"../chunks/B4RgVR4h.js";const ht=!0,oe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ht},Symbol.toStringTag,{value:"Module"}));var gt=(y,u,r)=>u(r()),bt=U("<button> </button>"),wt=U(`<span class="whitespace-nowrap semiBold text-lg">You're Currently Browsing</span><span> </span>`,1),xt=U('<span class="whitespace-nowrap semiBold text-lg">User-Driven Insights</span>'),_t=U("<div></div>"),yt=U('<div class="flex border border-[#263238] dark:border-[#11D9C5] rounded-[3px] mx-auto w-[80%] mt-[10%] h-auto"></div> <h2 class="pb-2 mx-auto w-[80%] text-center mt-[5%] mb-[3%] text-black flex flex-col items-start dark:text-white text-lg semiBold capitalize leading-[30px]"><!></h2> <!>',1);function kt(y,u){S(u,!0);const[r,c]=dt(),f=()=>lt($,"$activeTab",r);let i=Z(u,"tabs",19,()=>[]),W=Z(u,"header",3,""),$=pt(i().length>0?i()[0].id:null);function j(t){$.set(t)}q(()=>{i().forEach(({id:t,component:o,props:e})=>{const m=document.getElementById(`tab-content-${t}`);m&&new o({target:m,props:e||{}})})});var d=yt(),T=Y(d);J(T,21,i,K,(t,o)=>{let e=()=>s(o).id,m=()=>s(o).label;var g=bt();g.__click=[gt,j,e];var z=v(g,!0);n(g),M(()=>{F(g,1,`text-[10px] m-1 font-semibold h-full whitespace-nowrap tab ${f()===e()?"active":""}`),H(z,m())}),_(t,g)}),n(T);var L=R(T,2),l=v(L);{var a=t=>{var o=wt(),e=R(Y(o)),m=v(e,!0);n(e),M(()=>H(m,W())),_(t,o)},k=t=>{var o=xt();_(t,o)};I(l,t=>{f()==="tab2"?t(a):t(k,!1)})}n(L);var h=R(L,2);J(h,17,i,K,(t,o)=>{let e=()=>s(o).id;var m=_t();let g;M(z=>{g=F(m,1,"tab-content h-max",null,g,z),E(m,"id",`tab-content-${e()}`)},[()=>({show:f()===e()})]),_(t,m)}),_(y,d),G(),c()}Q(["click"]);function Ut(y,u){window.open(`https://app.netsepio.com/reviews/${u.urlWithoutProtocol}`,"_blank")}var $t=U('<div class="grid flex-grow"><button class="secondary-button">read reviews</button></div>');function jt(y,u){var r=$t(),c=v(r);c.__click=[Ut,u],n(r),_(y,r)}Q(["click"]);Q(["click"]);var Lt=U('<div style="box-shadow: 0px 2px 4px 0px rgba(38, 50, 56, 0.2);" class="reviews border border-secondary dark:border-action dark:shadow-action dark:border-opacity-10 border-opacity-10 h-[85px]"><p class="text-[11px]"> </p> <button class="flex items-center mt-2 bg-secondary dark:bg-action dark:bg-opacity-60 hover:scale-105 cursor-pointer duration-200 active:scale-100 w-[84px] h-[19px] gap-1 pt-[1px] px-[5px] pb-[2px] rounded-[5px]"><img alt="img"> <a target="_blank" class="text-[8px] whitespace-nowrap text-white">Review as NFT</a></button></div>'),Rt=U('<div class="w-[75%] mx-auto mt-[6%]"><div class="mb-[10%]"><div class="flex justify-between items-center mt-2"><h3 class="text-sm dark:font-medium font-semibold">Ratings</h3> <span class="text-[10px]"> </span></div> <div class="mt-4 h-2 w-full rounded-lg bg-white/5 shadow-sm shadow-appGray dark:shadow-none dark:bg-[#2F3A65] shadow-light"><span></span></div></div> <div><h3 class="text-sm mb-3 dark:font-medium font-semibold">Reviews</h3> <div class="flex flex-col gap-3"></div></div> <div class="grid grid-cols-2 mt-[10%] gap-x-4"><!> <a href="/submit-review/create-review"><button class="primary-button">Write Reviews</button></a></div></div>');function Tt(y,u){S(u,!0);let r=P(void 0),c=P(st([])),f=P(0),i,W=tt(()=>{var p;return(p=s(r))==null?void 0:p.replace(/^https?:\/\/([^/]+)\/.*/,"$1")});const $=async()=>{var p;try{const[b]=await chrome.tabs.query({active:!0,currentWindow:!0});x(r,(p=b.url)==null?void 0:p.toLocaleLowerCase(),!0)}catch(b){console.log(b)}finally{}},j=p=>p==null?void 0:p.replace("ipfs://",""),d=async()=>{var b,C,D;let p="";rt.subscribe(A=>p=A);try{const A={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}},w=await(await fetch(`${at}/getreviews?page=1&domain=${s(W)}`,A)).json();x(f,((b=w==null?void 0:w.payload)==null?void 0:b.averageRating)??0,!0),((C=w==null?void 0:w.payload)==null?void 0:C.reviews)&&((D=w==null?void 0:w.payload)==null||D.reviews.forEach(async N=>{const O=`https://nftstorage.link/ipfs/${j(N.metaDataUri)}`,X=await(await fetch(O)).json();X.transactionHash=N.transactionHash,x(c,[...s(c),X],!0)}))}catch(A){console.error("An error occurred:",A)}},T=(p,b)=>{const C=p.split(" "),A=C.slice(0,b).join(" "),B=C.length>b;return A.concat(B?"..":"")};q(async()=>{await $(),await d(),[i]=await ut()});var L=Rt(),l=v(L),a=v(l),k=R(v(a),2),h=v(k);n(k),n(a);var t=R(a,2),o=v(t);F(o,1,"h-[8px] block my-auto shad rounded-[5px] bg-[#263238] dark:bg-[#11D9C5]"),n(t),n(l);var e=R(l,2),m=R(v(e),2);J(m,21,()=>s(c).slice(0,2),K,(p,b)=>{var C=Lt(),D=v(C),A=v(D);n(D);var B=R(D,2),w=v(B);E(w,"width",12),E(w,"height",12),E(w,"src","/img.svg");var V=R(w,2);n(B),n(C),M(N=>{var O;H(A,`"${N??""}"`),E(V,"href",`https://explorer.aptoslabs.com/txn/${(O=s(b))==null?void 0:O.transactionHash}/?network=mainnet`)},[()=>T(s(b).description,15)]),_(p,C)}),n(m),n(e);var g=R(e,2),z=v(g);jt(z,{get urlWithoutProtocol(){return s(W)}}),it(2),n(g),n(L),M((p,b)=>{H(h,`${p??""}% safe`),vt(o,b)},[()=>Math.round(s(f)*10),()=>`width: ${Math.round(s(f)*10)}%`]),_(y,L),G()}var Wt=U('<p class="p-5 w-max mx-auto font-medium capitalize">Insight generation in progress</p>'),Ct=U('<p class="text-[11px] font-normal"> </p>'),At=U('<p class="text-[11px] capitalize w-max mx-auto font-medium"></p>'),Pt=U('<div class="reviews w-[80%] h-[315px] mx-auto"><!></div>');function Dt(y,u){S(u,!0);let r,c=P(""),f,i=P(!1);const W=async()=>{var l;x(i,!0);try{const[a]=await chrome.tabs.query({active:!0,currentWindow:!0});r=(l=a.url)==null?void 0:l.toLocaleLowerCase()}catch(a){console.log(a),x(i,!1)}finally{x(i,!1)}},$=async()=>{var a;x(i,!0);const l={method:"GET",headers:{"Content-Type":"application/json"}};try{const h=await(await fetch(`${at}/site-insight?siteUrl=${new URL(r).origin}`,l)).json();f=h.message,(a=h.payload)!=null&&a.insight&&x(c,h.payload.insight,!0),x(i,!1)}catch(k){console.log("error",k),x(i,!1)}};q(async()=>{await W(),await $()});var j=Pt(),d=v(j);{var T=l=>{var a=Wt();_(l,a)},L=(l,a)=>{{var k=t=>{var o=Ct(),e=v(o,!0);n(o),M(()=>H(e,s(c))),_(t,o)},h=(t,o)=>{{var e=m=>{var g=At();g.textContent="No insight found for the above url",_(m,g)};I(t,m=>{s(c)==""&&m(e)},o)}};I(l,t=>{s(c)!==""?t(k):t(h,!1)},a)}};I(d,l=>{s(i)?l(T):l(L,!1)})}n(j),_(y,j),G()}var Mt=U('<div class=" h-full"><!> <!> <div><!></div></div>');function zt(y,u){S(u,!0);let r=P(void 0),c=P(!1),f="",i=tt(()=>{var a;return(a=s(r))==null?void 0:a.replace(/^https?:\/\/([^/]+)\/.*/,"$1")});const W=async()=>{var a;x(c,!0);try{const[k]=await chrome.tabs.query({active:!0,currentWindow:!0});x(r,(a=k.url)==null?void 0:a.toLocaleLowerCase(),!0);const h=new URL(s(r)).origin,t=new URL(s(r));console.log(t.origin,t.pathname),chrome.storage.local.get("urlMappings",o=>{const e=o.urlMappings||{};e[h]||(e[h]=[]),e[h].includes(t.pathname)||e[h].push(t.pathname),chrome.storage.local.set({urlMappings:e},()=>{mt.set(e)})}),console.log(f)}catch(k){console.log(k)}finally{x(c,!1)}};q(async()=>{await W()});var $=Mt(),j=v($);ct(j,{});var d=R(j,2);kt(d,{get header(){return s(i)},tabs:[{id:"tab2",label:"AI Summary",component:Dt},{id:"tab1",label:"Reviews",component:Tt}]});var T=R(d,2);let L;var l=v(T);et(l),n(T),n($),M(a=>L=F(T,1,"modal h-screen z-10 absolute top-0 flex justify-center items-center",null,L,a),[()=>({"modal-open":s(c)})]),_(y,$),G()}function se(y,u){S(u,!0);let r="none",c=!1,f=P(!0);q(async()=>{rt.subscribe(d=>r=d),c=ft("unlocked"),!c&&r!=="none"&&r!==null&&r!==""&&await nt("/signIn"),x(f,!1)});var i=ot(),W=Y(i);{var $=d=>{et(d)},j=d=>{zt(d,{})};I(W,d=>{s(f)?d($):d(j,!1)})}_(y,i),G()}export{se as component,oe as universal};
