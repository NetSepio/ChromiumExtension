import{t as k,a as _}from"../chunks/XdHx9Q2R.js";import{p as Tt,d as s,f as R,a as Nt,s as m,b as n,c as l,g as e,r as d,aj as V,t as X,n as Et}from"../chunks/CsqGFeDh.js";import{s as Y}from"../chunks/C-G1gKjH.js";import{i as w}from"../chunks/9_3Cu2be.js";import{r as Z,s as St}from"../chunks/CYIbFpwj.js";import{d as Kt,e as tt}from"../chunks/DCCTpnlQ.js";import{t as et,f as jt,s as It}from"../chunks/D6f8Syou.js";import{b as at}from"../chunks/BoKxmPir.js";import{a as Mt,s as Pt}from"../chunks/GeWgIBjc.js";import{p as $t,H as rt}from"../chunks/D4De-E33.js";import{H as Ct}from"../chunks/CoumpVV1.js";import{e as h,s as $,W as C,z as st,a as ot}from"../chunks/C_hR8wQP.js";import{d as Ht,w as Bt,p as Ft,a as Jt,t as H}from"../chunks/0wNmbcRK.js";import{o as Ot}from"../chunks/BcPiOdGB.js";import{L as zt}from"../chunks/BKUzuBl2.js";var Lt=k('<div class="flex mt-[5%] w-full items-center"><p class="text-dark dark:text-white w-full text-center">Send to</p> <p class="text-secondary hover:scale-90 active:scale-100 duration-150 dark:text-action text-xs"><a href="/wallet">Cancel</a></p></div> <input type="search" placeholder="Enter Address (0x)" class="input rounded-md w-full h-10 dark:border-opacity-50 border-opacity-50 mt-[5%] primary-input">',1),Ut=k('<p class="absolute right-1 top-1 animate-bounce text-red-500 text-[8px]">Not Enough Money</p>'),Dt=(B,K)=>s(K,!1),Gt=k('<div class="flex-1 w-[100%] mt-[15%] mx-auto"><div class="flex justify-between w-full"><p class="text-xs mt-3">Asset:</p> <div class="border p-3 flex border-secondary dark:border-action border-opacity-30 dark:border-opacity-30 rounded-md w-[80%] h-[70px]"><img src="/logo.svg" alt="token" class="w-12 h-12 mr-[10%] rounnded-full"> <div class="h-full flex flex-col justify-around"><p class="text-xs">APT</p> <p class="text-[11px]"> </p></div></div></div> <div class="flex justify-between mt-[10%] w-full"><p class="text-xs mt-3">Amount:</p> <div class="border relative py-[4%] pl-[12%] flex justify-between flex-col border-secondary dark:border-action border-opacity-30 dark:border-opacity-30 rounded-md w-[80%] h-[70px]"><input type="number" placeholder="0 APT" class="text-lg bg-transparent focus:outline-none focus:border-b border-white border-opacity-0"> <!></div></div> <div class="w-full rounded-lg mt-[10%] opacity-75 text-xs border-secondary border flex items-center p-5 justify-start dark:border-action border-opacity-30 dark:border-opacity-30 h-[100px]"> </div> <div class="flex w-full justify-between items-center mt-8"><button class=" w-[120px] h-[36px] secondary-button">Cancel</button> <button class=" w-[120px] disabled:opacity-40 h-[36px] primary-button">Send</button></div></div>'),Wt=k('<h4 class="text-appPink mt-[15%] animate-pulse flex items-center">Invalid Address</h4>'),qt=k('<div class="w-[80%] mx-auto flex flex-col justify-start pt-[20%] pb-[30%] h-full items-center"><img class="object-cover relative left-3" alt="done"> <h4 class="semiBold mt-[8%] mb-[12%] text-[22px]">APT Sent!</h4> <button class="h-[36px] mx-auto text-xs w-[90%] primary-button"><a href="/wallet">Go To Transactions</a></button></div>'),Qt=k('<!> <div class=" mx-auto flex flex-col items-center h-[520px] w-[80%]"><!> <!> <!> <!> <!></div>',1);function de(B,K){Tt(K,!0);const[nt,it]=Pt(),ct=()=>Mt($t,"$page",nt);let u=m(""),i=m(!1),v=m(void 0),lt=m(void 0),N="",j,I,E=m(!1),x=m(void 0),A=m(!1),g=!0,{params:dt}=ct(),F=m(void 0);Ht.subscribe(t=>s(F,t,!0));let pt=V(()=>e(F)?"/done.svg":"/done_light.svg"),M=V(()=>Number(parseInt(dt.bal)/1e8).toFixed(4));Bt.subscribe(t=>N=t),Ft.subscribe(t=>j=t),Jt.subscribe(t=>I=t);const ut=async()=>{const t=await navigator.clipboard.readText();s(u,t,!0),console.log("checking",e(u)),s(i,!0),H.subscribe(c=>g=JSON.parse(c));let a=g?h.TESTNET:h.MAINNET;const o=new $({network:a}),r=new C(o);try{let c=await r.getAccountInfo({accountAddress:e(u)});console.log(c),s(i,!1),s(E,!0)}catch{s(i,!1),s(E,!1)}},mt=async()=>{console.log("semding",N),console.log(j),H.subscribe(r=>g=JSON.parse(r));let t=g?h.TESTNET:h.MAINNET;const a=new $({network:t}),o=new C(a);try{s(i,!0);const r={function:"0x1::coin::transfer",typeArguments:["0x1::aptos_coin::AptosCoin"],functionArguments:[e(u),e(v)*10**8]},c=await o.transaction.build.simple({sender:N,data:r}),y=new rt(I).toUint8Array(),T=new st(y),f=ot.fromPrivateKey({privateKey:T}),p=await o.transaction.signAndSubmitTransaction({signer:f,transaction:c});console.log(p),s(i,!1),s(A,!0)}catch(r){console.log(r),s(i,!1)}},vt=async()=>{console.log("semding",e(u)),console.log(j),H.subscribe(r=>g=JSON.parse(r));let t=g?h.TESTNET:h.MAINNET;const a=new $({network:t}),o=new C(a);try{s(i,!0);const r={function:"0x1::coin::transfer",typeArguments:["0x1::aptos_coin::AptosCoin"],functionArguments:[e(u),e(v)*10**8]},c=await o.transaction.build.simple({sender:N,data:r}),y=new rt(I).toUint8Array(),T=new st(y),f=ot.fromPrivateKey({privateKey:T}),[p]=await o.transaction.simulate.simple({signerPublicKey:f.publicKey,transaction:c});console.log(p),s(x,Math.min(Number(p.max_gas_amount),Number(parseInt(p.gas_used)*1.5*parseInt(p.gas_unit_price)))*10**-8),s(i,!1)}catch(r){console.log(r),s(i,!1)}};Ot(async()=>{});var J=Qt(),O=R(J);Ct(O,{});var z=n(O,2),L=l(z);{var ft=t=>{var a=Lt(),o=n(R(a),2);Z(o),tt("paste",o,ut),at(o,()=>e(u),r=>s(u,r)),_(t,a)};w(L,t=>{e(A)||t(ft)})}var U=n(L,2);{var bt=t=>{var a=Gt(),o=l(a),r=n(l(o),2),c=n(l(r),2),y=n(l(c),2),T=l(y,!0);d(y),d(c),d(r),d(o);var f=n(o,2),p=n(l(f),2),S=l(p);Z(S);var wt=n(S,2);{var ht=b=>{var At=Ut();_(b,At)};w(wt,b=>{e(v)+e(x)>Number(e(M))&&b(ht)})}d(p),d(f);var P=n(f,2),kt=l(P,!0);d(P);var W=n(P,2),q=l(W);q.__click=[Dt,lt];var Q=n(q,2);Q.__click=mt,d(W),d(a),X(b=>{Y(T,`Balance: ${e(M)} APT`),Y(kt,e(x)?e(x):"Estimated Fee"),Q.disabled=b},[()=>!e(x)||!e(v)||e(v)+e(x)>Number(e(M))]),tt("blur",S,vt),at(S,()=>e(v),b=>s(v,b)),et(5,a,()=>jt,()=>({duration:300})),_(t,a)};w(U,t=>{e(E)&&!e(i)&&!e(A)&&t(bt)})}var D=n(U,2);{var xt=t=>{zt(t)};w(D,t=>{e(i)&&t(xt)})}var G=n(D,2);{var gt=t=>{var a=Wt();_(t,a)};w(G,t=>{!e(E)&&!e(i)&&!e(A)&&t(gt)})}var yt=n(G,2);{var _t=t=>{var a=qt(),o=l(a);Et(4),d(a),X(()=>St(o,"src",e(pt))),et(5,a,()=>It,()=>({duration:200})),_(t,a)};w(yt,t=>{e(A)&&t(_t)})}d(z),_(B,J),Nt(),it()}Kt(["click"]);export{de as component};
