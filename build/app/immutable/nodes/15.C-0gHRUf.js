import{t as G,a as E,c as ae}from"../chunks/XdHx9Q2R.js";import{p as se,d as H,t as M,a as ie,s as D,b as _,c as $,g as h,r as v,f as ne,n as It}from"../chunks/CsqGFeDh.js";import{s as C}from"../chunks/C-G1gKjH.js";import{i as vt}from"../chunks/9_3Cu2be.js";import{e as xt,i as kt}from"../chunks/B4K1HdnT.js";import{b as $t,r as oe}from"../chunks/CYIbFpwj.js";import{s as O}from"../chunks/CEKie2dh.js";import{d as ue,e as Rt}from"../chunks/DCCTpnlQ.js";import{r as de}from"../chunks/BhRXhRJO.js";import{t as Ft,f as Nt}from"../chunks/D6f8Syou.js";import{b as Mt}from"../chunks/BoKxmPir.js";import{A as bt,b as Tt,a as ce,c as le}from"../chunks/DLAfaDMv.js";import{o as he}from"../chunks/BcPiOdGB.js";import{c as we}from"../chunks/Cu79Pbua.js";import{L as pe}from"../chunks/BKUzuBl2.js";import{H as fe}from"../chunks/CoumpVV1.js";import"../chunks/sqpubMME.js";import{d as me}from"../chunks/0wNmbcRK.js";import{a as ye,b as ge}from"../chunks/DcZVe53u.js";var d=class extends Error{constructor(t,a,e){super(t),this.statusCode=a,this.details=e,this.name="PinataError"}},g=class extends d{constructor(t,a,e){super(t,a,e),this.name="NetworkError"}},b=class extends d{constructor(t,a,e){super(t,a,e),this.name="AuthenticationError"}},T=class extends d{constructor(t,a){super(t,void 0,a),this.name="ValidationError"}},ve=async t=>{if(!t)throw new T("Pinata configuration is missing");let a,e="https://api.pinata.cloud";t.endpointUrl&&(e=t.endpointUrl),t.customHeaders&&Object.keys(t.customHeaders).length>0?a={Authorization:`Bearer ${t.pinataJwt}`,...t.customHeaders}:a={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/testAuthentication"};try{const n=await fetch(`${e}/data/testAuthentication`,{method:"GET",headers:a});if(!n.ok){const r=await n.text();throw n.status===401||n.status===403?new b(`Authentication failed: ${r}`,n.status,r):new g(`HTTP error: ${r}`,n.status,r)}return await n.json()}catch(n){throw n instanceof d?n:n instanceof Error?new d(`Error processing authentication: ${n.message}`):new d("An unknown error occurred while testing authentication")}};function xe(t){const a=t.match(/\/files\/([^\/]+)/);if(a&&a[1])return a[1];throw new g("File ID not found in URL",400,t)}var ke=async(t,a,e)=>{var o,u,p,x;if(!t)throw new T("Pinata configuration is missing");const n=(e==null?void 0:e.keys)||t.pinataJwt;let s="https://uploads.pinata.cloud/v3";if(t.uploadUrl&&(s=t.uploadUrl),a.size>94371840){let l;t.customHeaders&&Object.keys(t.customHeaders).length>0?l={Authorization:`Bearer ${n}`,...t.customHeaders}:l={Authorization:`Bearer ${n}`,Source:"sdk/file"};const f=((o=e==null?void 0:e.metadata)==null?void 0:o.name)||a.name||"File from SDK";let w=`filename ${btoa(f)},filetype ${btoa(a.type)}`;e!=null&&e.groupId&&w+`,group_id ${btoa(e.groupId)}`,(u=e==null?void 0:e.metadata)!=null&&u.keyvalues&&w+`,keyvalues ${btoa(JSON.stringify(e.metadata.keyvalues))}`;let c=`${s}/files`;e!=null&&e.url&&(c=e.url);const m=await fetch(c,{method:"POST",headers:{"Upload-Length":`${a.size}`,"Upload-Metadata":w,...l}}),y=m.headers.get("Location");if(!y)throw new g("Upload URL not provided",m.status,"");const k=50*1024*1024,B=Math.ceil(a.size/k);let K=0,V;for(let it=0;it<B;it++){const W=a.slice(K,K+k);if(V=await fetch(y,{method:"PATCH",headers:{"Content-Type":"application/offset+octet-stream","Upload-Offset":K.toString(),...l},body:W}),!V.ok){const lt=await V.text();throw new g(`HTTP error during chunk upload: ${lt}`,V.status,lt)}K+=W.size}if(V.status===204){const it=xe(y);let W;t.endpointUrl?W=t.endpointUrl:W="https://api.pinata.cloud/v3";const nt=(await(await fetch(`${W}/files/${it}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}})).json()).data;if(e!=null&&e.vectorize){const ht=await fetch(`${s}/vectorize/files/${nt.id}`,{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(ht.ok)return nt.vectorized=!0,nt;{const _t=await ht.text();throw new g(`HTTP error during vectorization: ${_t}`,ht.status,_t)}}return nt}}let r;t.customHeaders&&Object.keys(t.customHeaders).length>0?r={Authorization:`Bearer ${n}`,...t.customHeaders}:r={Authorization:`Bearer ${n}`,Source:"sdk/file"};const i=new FormData;if(i.append("file",a,a.name),e!=null&&e.url)try{const l=await fetch(e.url,{method:"POST",headers:r,body:i});if(!l.ok){const c=await l.text();throw l.status===401||l.status===403?new b(`Authentication failed: ${c}`,l.status,c):new g(`HTTP error: ${c}`,l.status,c)}return(await l.json()).data}catch(l){throw l instanceof d?l:l instanceof Error?new d(`Error processing base64: ${l.message}`):new d("An unknown error occurred while trying to upload base64")}i.append("name",((p=e==null?void 0:e.metadata)==null?void 0:p.name)||a.name||"File from SDK"),e!=null&&e.groupId&&i.append("group_id",e.groupId),(x=e==null?void 0:e.metadata)!=null&&x.keyvalues&&i.append("keyvalues",JSON.stringify(e.metadata.keyvalues));try{const l=await fetch(`${s}/files`,{method:"POST",headers:r,body:i});if(!l.ok){const c=await l.text();throw l.status===401||l.status===403?new b(`Authentication failed: ${c}`,l.status,c):new g(`HTTP error: ${c}`,l.status,c)}const w=(await l.json()).data;if(e!=null&&e.vectorize){const c=await fetch(`${s}/vectorize/files/${w.id}`,{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(c.ok)return w.vectorized=!0,w;{const m=await c.text();throw new g(`HTTP error during vectorization: ${m}`,c.status,m)}}return w}catch(l){throw l instanceof d?l:l instanceof Error?new d(`Error uploading file: ${l.message}`):new d("An unknown error occurred while uploading the file")}},$e=async(t,a,e)=>{var x,l,f;if(!t)throw new T("Pinata configuration is missing");const n=(e==null?void 0:e.keys)||(t==null?void 0:t.pinataJwt),s=(x=e==null?void 0:e.metadata)!=null&&x.name?(l=e==null?void 0:e.metadata)==null?void 0:l.name:"base64 string",r=Buffer.from(a,"base64"),i=new Blob([r]),o=new FormData;o.append("file",i,s),o.append("name",s),e!=null&&e.groupId&&o.append("group_id",e.groupId),(f=e==null?void 0:e.metadata)!=null&&f.keyvalues&&o.append("keyvalues",JSON.stringify(e.metadata.keyvalues));let u;t.customHeaders&&Object.keys(t.customHeaders).length>0?u={Authorization:`Bearer ${n}`,...t.customHeaders}:u={Authorization:`Bearer ${n}`,Source:"sdk/base64"};let p="https://uploads.pinata.cloud/v3";if(t.uploadUrl&&(p=t.uploadUrl),e!=null&&e.url)try{const w=await fetch(e.url,{method:"POST",body:o});if(!w.ok){const y=await w.text();throw w.status===401||w.status===403?new b(`Authentication failed: ${y}`,w.status,y):new g(`HTTP error: ${y}`,w.status,y)}return(await w.json()).data}catch(w){throw w instanceof d?w:w instanceof Error?new d(`Error processing base64: ${w.message}`):new d("An unknown error occurred while trying to upload base64")}try{const w=await fetch(`${p}/files`,{method:"POST",headers:u,body:o});if(!w.ok){const y=await w.text();throw w.status===401||w.status===403?new b(`Authentication failed: ${y}`,w.status,y):new g(`HTTP error: ${y}`,w.status,y)}const m=(await w.json()).data;if(e!=null&&e.vectorize){const y=await fetch(`${p}/vectorize/files/${m.id}`,{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(y.ok)return m.vectorized=!0,m;{const k=await y.text();throw new g(`HTTP error during vectorization: ${k}`,y.status,k)}}return m}catch(w){throw w instanceof d?w:w instanceof Error?new d(`Error processing base64: ${w.message}`):new d("An unknown error occurred while trying to upload base64")}},be=async(t,a,e)=>{var f,w;if(!t)throw new T("Pinata configuration is missing");const n=(e==null?void 0:e.keys)||(t==null?void 0:t.pinataJwt),s=new FormData,r=await fetch(a);if(!r.ok){const c=await r.text();throw new g(`HTTP error: ${c}`,r.status,c)}const i=await r.arrayBuffer(),o=new Blob([i]),u=((f=e==null?void 0:e.metadata)==null?void 0:f.name)??"url_upload",p=new File([o],u);s.append("file",p,u),s.append("name",u),e!=null&&e.groupId&&s.append("group_id",e.groupId),(w=e==null?void 0:e.metadata)!=null&&w.keyvalues&&s.append("keyvalues",JSON.stringify(e.metadata.keyvalues));let x;t.customHeaders&&Object.keys(t.customHeaders).length>0?x={Authorization:`Bearer ${n}`,...t.customHeaders}:x={Authorization:`Bearer ${n}`,Source:"sdk/url"};let l="https://uploads.pinata.cloud/v3";if(t.uploadUrl&&(l=t.uploadUrl),e!=null&&e.url)try{const c=await fetch(e.url,{method:"POST",body:s});if(!c.ok){const k=await c.text();throw c.status===401||c.status===403?new b(`Authentication failed: ${k}`,c.status,k):new g(`HTTP error: ${k}`,c.status,k)}return(await c.json()).data}catch(c){throw c instanceof d?c:c instanceof Error?new d(`Error processing base64: ${c.message}`):new d("An unknown error occurred while trying to upload base64")}try{const c=await fetch(`${l}/files`,{method:"POST",headers:x,body:s});if(!c.ok){const k=await c.text();throw c.status===401||c.status===403?new b(`Authentication failed: ${k}`,c.status,k):new g(`HTTP error: ${k}`,c.status,k)}const y=(await c.json()).data;if(e!=null&&e.vectorize){const k=await fetch(`${l}/vectorize/files/${y.id}`,{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(k.ok)return y.vectorized=!0,y;{const B=await k.text();throw new g(`HTTP error during vectorization: ${B}`,k.status,B)}}return y}catch(c){throw c instanceof d?c:c instanceof Error?new d(`Error processing url: ${c.message}`):new d("An unknown error occurred while uploading by url")}},Te=async(t,a,e)=>{var x,l;if(!t)throw new T("Pinata configuration is missing");const n=(e==null?void 0:e.keys)||(t==null?void 0:t.pinataJwt),s=JSON.stringify(a),r=new Blob([s]),i=new File([r],"data.json",{type:"application/json"}),o=new FormData;o.append("file",i,i.name),o.append("name",((x=e==null?void 0:e.metadata)==null?void 0:x.name)||i.name||"File from SDK"),e!=null&&e.groupId&&o.append("group_id",e.groupId),(l=e==null?void 0:e.metadata)!=null&&l.keyvalues&&o.append("keyvalues",JSON.stringify(e.metadata.keyvalues));let u;t.customHeaders&&Object.keys(t.customHeaders).length>0?u={Authorization:`Bearer ${n}`,...t.customHeaders}:u={Authorization:`Bearer ${n}`,Source:"sdk/json"};let p="https://uploads.pinata.cloud/v3";if(t.uploadUrl&&(p=t.uploadUrl),e!=null&&e.url)try{const f=await fetch(e.url,{method:"POST",body:o});if(!f.ok){const m=await f.text();throw f.status===401||f.status===403?new b(`Authentication failed: ${m}`,f.status,m):new g(`HTTP error: ${m}`,f.status,m)}return(await f.json()).data}catch(f){throw f instanceof d?f:f instanceof Error?new d(`Error processing base64: ${f.message}`):new d("An unknown error occurred while trying to upload base64")}try{const f=await fetch(`${p}/files`,{method:"POST",headers:u,body:o});if(!f.ok){const m=await f.text();throw f.status===401||f.status===403?new b(`Authentication failed: ${m}`,f.status,m):new g(`HTTP error: ${m}`,f.status,m)}const c=(await f.json()).data;if(e!=null&&e.vectorize){const m=await fetch(`${p}/vectorize/files/${c.id}`,{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(m.ok)return c.vectorized=!0,c;{const y=await m.text();throw new g(`HTTP error during vectorization: ${y}`,m.status,y)}}return c}catch(f){throw f instanceof d?f:f instanceof Error?new d(`Error processing json: ${f.message}`):new d("An unknown error occurred while uploading json")}},_e=t=>new Promise(a=>{setTimeout(a,t)}),Ae=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=[];let n;t.customHeaders&&Object.keys(t.customHeaders).length>0?n={Authorization:`Bearer ${t.pinataJwt}`,...t.customHeaders}:n={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/deleteFile"};let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);for(const r of a)try{const i=await fetch(`${s}/files/${r}`,{method:"DELETE",headers:n});if(await _e(300),!i.ok){const o=await i.text();throw i.status===401?new b(`Authentication failed: ${o}`,i.status,o):new g(`HTTP error: ${o}`,i.status,o)}e.push({id:r,status:i.statusText})}catch(i){let o;i instanceof d?o=i.message:i instanceof Error?o=`Error deleting file ${r}: ${i.message}`:o=`An unknown error occurred while deleting file ${r}`,e.push({id:r,status:o})}return e},Se=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=new URLSearchParams;if(a){const{name:r,group:i,cid:o,order:u,limit:p,mimeType:x,pageToken:l,cidPending:f,metadata:w,noGroup:c}=a;p&&e.append("limit",p.toString()),r&&e.append("name",r),i&&e.append("group",i),o&&e.append("cid",o),x&&e.append("mimeType",x),u&&e.append("order",u),l&&e.append("pageToken",l),f&&e.append("cidPending","true"),c&&e.append("group","null"),w&&typeof w=="object"&&Object.entries(w).forEach(([m,y])=>{e.append(`metadata[${m}]`,y.toString())})}let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);const s=`${n}/files?${e.toString()}`;try{let r;t.customHeaders&&Object.keys(t.customHeaders).length>0?r={Authorization:`Bearer ${t.pinataJwt}`,...t.customHeaders}:r={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/listFiles"};const i=await fetch(s,{method:"GET",headers:r});if(!i.ok){const p=await i.text();throw i.status===401||i.status===403?new b(`Authentication failed: ${p}`,i.status,p):new g(`HTTP error: ${p}`,i.status,p)}return(await i.json()).data}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing list files: ${r.message}`):new d("An unknown error occurred while listing files")}},He=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");if(!a.name&&(!a.keyvalues||Object.keys(a.keyvalues).length===0))throw new T("At least one of 'name' or 'keyvalues' must be provided");const e={};a.name!==void 0&&(e.name=a.name),a.keyvalues&&Object.keys(a.keyvalues).length>0&&(e.keyvalues=a.keyvalues);const n=JSON.stringify(e);let s;t.customHeaders&&Object.keys(t.customHeaders).length>0?s={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:s={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/updateMetadata"};let r="https://api.pinata.cloud/v3";t.endpointUrl&&(r=t.endpointUrl);try{const i=await fetch(`${r}/files/${a.id}`,{method:"PUT",headers:s,body:n});if(!i.ok){const p=await i.text();throw i.status===401||i.status===403?new b(`Authentication failed: ${p}`,i.status,p):new g(`HTTP error: ${p}`,i.status,p)}return(await i.json()).data}catch(i){throw i instanceof d?i:i instanceof Error?new d(`Error processing updateFile: ${i.message}`):new d("An unknown error occurred while updating file")}},Wt=async(t,a,e)=>{var w;if(!t)throw new T("Pinata configuration is missing");let n,s=`${t==null?void 0:t.pinataGateway}/files/${a}`;const r=new URLSearchParams;e&&(e.width&&r.append("img-width",e.width.toString()),e.height&&r.append("img-height",e.height.toString()),e.dpr&&r.append("img-dpr",e.dpr.toString()),e.fit&&r.append("img-fit",e.fit),e.gravity&&r.append("img-gravity",e.gravity),e.quality&&r.append("img-quality",e.quality.toString()),e.format&&r.append("img-format",e.format),e.animation!==void 0&&r.append("img-anim",e.animation.toString()),e.sharpen&&r.append("img-sharpen",e.sharpen.toString()),e.onError===!0&&r.append("img-onerror","redirect"),e.metadata&&r.append("img-metadata",e.metadata));const i=r.toString();i&&(s+=`?${i}`);const o=Math.floor(new Date().getTime()/1e3),u=JSON.stringify({url:s,date:o,expires:30,method:"GET"});let p="https://api.pinata.cloud/v3";t.endpointUrl&&(p=t.endpointUrl);let x;t.customHeaders&&Object.keys(t.customHeaders).length>0?x={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:x={"Content-Type":"application/json",Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/getCid"};const f=await(await fetch(`${p}/files/sign`,{method:"POST",headers:x,body:u})).json();try{const c=await fetch(f.data);if(!c.ok){const k=await c.text();throw c.status===401||c.status===403?new b(`Authentication Failed: ${k}`,c.status,k):new g(`HTTP error: ${k}`,c.status,k)}const m=((w=c.headers.get("content-type"))==null?void 0:w.split(";")[0])||null;return m!=null&&m.includes("application/json")?n=await c.json():m!=null&&m.includes("text/")?n=await c.text():n=await c.blob(),{data:n,contentType:m}}catch(c){throw c instanceof d?c:c instanceof Error?new d(`Error processing getCid: ${c.message}`):new d("An unknown error occurred while getting CID contents")}},Pe=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/createKey"};const n=JSON.stringify(a);let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);try{const r=await fetch(`${s}/pinata/keys`,{method:"POST",headers:e,body:n});if(!r.ok){const o=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${o}`,r.status,o):new g(`HTTP error: ${o}`,r.status,o)}return await r.json()}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing createKey: ${r.message}`):new d("An unknown error occurred while creating API key")}},Kt=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/listKeys"};const n=new URLSearchParams;if(a){const{offset:r,name:i,revoked:o,limitedUse:u,exhausted:p}=a;r&&n.append("offset",r.toString()),o!==void 0&&n.append("revoked",o.toString()),u!==void 0&&n.append("limitedUse",u.toString()),p!==void 0&&n.append("exhausted",p.toString()),i&&n.append("name",i)}let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);try{const r=await fetch(`${s}/pinata/keys?${n.toString()}`,{method:"GET",headers:e});if(!r.ok){const o=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${o}`,r.status,o):new g(`HTTP error: ${o}`,r.status,o)}return(await r.json()).keys}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing listKeys: ${r.message}`):new d("An unknown error occurred while listing API keys")}},qe=t=>new Promise(a=>{setTimeout(a,t)}),je=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?(e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders},e={...t.customHeaders}):e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/revokeKeys"};const n=[];let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);for(const r of a)try{const i=await fetch(`${s}/pinata/keys/${r}`,{method:"PUT",headers:e});if(await qe(300),!i.ok){const u=await i.text();throw i.status===401||i.status===403?new b(`Authentication failed: ${u}`,i.status,u):new g(`HTTP error: ${u}`,i.status,u)}const o=await i.json();n.push({key:r,status:o})}catch(i){let o;i instanceof d?o=i.message:i instanceof Error?o=`Error revoking key ${r}: ${i.message}`:o=`An unknown error occurred while revoking key ${r}`,n.push({key:r,status:o})}return n},Ue=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=JSON.stringify({name:a.name,is_public:a.isPublic});let n;t.customHeaders&&Object.keys(t.customHeaders).length>0?n={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:n={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/createGroup"};let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);try{const r=await fetch(`${s}/files/groups`,{method:"POST",headers:n,body:e});if(!r.ok){const u=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${u}`,r.status,u):new g(`HTTP error: ${u}`,r.status,u)}return(await r.json()).data}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing createGroup: ${r.message}`):new d("An unknown error occurred while creating a group")}},ze=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/listGroups"};const n=new URLSearchParams;if(a){const{pageToken:r,name:i,limit:o,isPublic:u}=a;r&&n.append("pageToken",r.toString()),u&&n.append("isPublic",u.toString()),i&&n.append("name",i),o!==void 0&&n.append("limit",o.toString())}let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);try{const r=await fetch(`${s}/files/groups?${n.toString()}`,{method:"GET",headers:e});if(!r.ok){const u=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${u}`,r.status,u):new g(`HTTP error: ${u}`,r.status,u)}return(await r.json()).data}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing listGroups: ${r.message}`):new d("An unknown error occurred while listing groups")}},De=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/getGroup"};let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);try{const s=await fetch(`${n}/files/groups/${a.groupId}`,{method:"GET",headers:e});if(!s.ok){const o=await s.text();throw s.status===401||s.status===403?new b(`Authentication failed: ${o}`,s.status,o):new g(`HTTP error: ${o}`,s.status,o)}return(await s.json()).data}catch(s){throw s instanceof d?s:s instanceof Error?new d(`Error processing getGroup: ${s.message}`):new d("An unknown error occurred while getting info for a group")}},Ee=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=i=>new Promise(o=>{setTimeout(o,i)}),n=[];let s;t.customHeaders&&Object.keys(t.customHeaders).length>0?s={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:s={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/addToGroup"};let r="https://api.pinata.cloud/v3";t.endpointUrl&&(r=t.endpointUrl);for(const i of a.files)try{const o=await fetch(`${r}/files/groups/${a.groupId}/ids/${i}`,{method:"PUT",headers:s});if(await e(300),!o.ok){const u=await o.text();throw o.status===401?new b(`Authentication failed: ${u}`,o.status,u):new g(`HTTP error: ${u}`,o.status,u)}n.push({id:i,status:o.statusText})}catch(o){let u;o instanceof d?u=o.message:o instanceof Error?u=`Error adding file ${i} to group: ${o.message}`:u=`An unknown error occurred while adding file ${i} to group`,n.push({id:i,status:u})}return n},Ce=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=JSON.stringify({name:a.name,is_public:a.isPublic});let n;t.customHeaders&&Object.keys(t.customHeaders).length>0?n={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:n={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/updateGroup"};let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);try{const r=await fetch(`${s}/files/groups/${a.groupId}`,{method:"PUT",headers:n,body:e});if(!r.ok){const u=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${u}`,r.status,u):new g(`HTTP error: ${u}`,r.status,u)}return(await r.json()).data}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing updateGroup: ${r.message}`):new d("An unknown error occurred while updating group")}},Be=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=i=>new Promise(o=>{setTimeout(o,i)}),n=[];let s;t.customHeaders&&Object.keys(t.customHeaders).length>0?s={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:s={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/addToGroup"};let r="https://api.pinata.cloud/v3";t.endpointUrl&&(r=t.endpointUrl);for(const i of a.files)try{const o=await fetch(`${r}/files/groups/${a.groupId}/ids/${i}`,{method:"DELETE",headers:s});if(await e(300),!o.ok){const u=await o.text();throw o.status===401?new b(`Authentication failed: ${u}`,o.status,u):new g(`HTTP error: ${u}`,o.status,u)}n.push({id:i,status:o.statusText})}catch(o){let u;o instanceof d?u=o.message:o instanceof Error?u=`Error adding file ${i} to group: ${o.message}`:u=`An unknown error occurred while adding file ${i} to group`,n.push({id:i,status:u})}return n},Je=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/deleteGroup"};let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);try{const s=await fetch(`${n}/files/groups/${a.groupId}`,{method:"DELETE",headers:e});if(!s.ok){const i=await s.text();throw s.status===401||s.status===403?new b(`Authentication failed: ${i}`,s.status,i):new g(`HTTP error: ${i}`,s.status,i)}return s.statusText}catch(s){throw s instanceof d?s:s instanceof Error?new d(`Error processing deleteGroup: ${s.message}`):new d("An unknown error occurred while deleting a group")}},Ie=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=new URLSearchParams;if(a){const{cid:r,gateway_domain:i,start_date:o,end_date:u,file_name:p,user_agent:x,country:l,region:f,referer:w,limit:c,sort_order:m,sort_by:y,attribute:k}=a,B=i||t.pinataGateway;if(B){const K=B.replace(/^https?:\/\//,"");e.append("gateway_domain",K)}r&&e.append("cid",r),o&&e.append("start_date",o),u&&e.append("end_date",u),p&&e.append("file_name",p),x&&e.append("user_agent",x.toString()),l&&e.append("country",l.toString()),f&&e.append("region",f),w&&e.append("referer",w.toString()),c&&e.append("limit",c.toString()),m&&e.append("sort_order",m),y&&e.append("sort_by",y),k&&e.append("by",k)}let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);const s=`${n}/ipfs/gateway_analytics_top?${e.toString()}`;try{let r;t.customHeaders&&Object.keys(t.customHeaders).length>0?r={...t.customHeaders}:r={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/analyticsTopUsage"};const i=await fetch(s,{method:"GET",headers:r});if(!i.ok){const u=await i.text();throw i.status===401||i.status===403?new b(`Authentication failed: ${u}`,i.status,u):new g(`HTTP error: ${u}`,i.status,u)}return await i.json()}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing anaytics usage: ${r.message}`):new d("An unknown error occurred while fetching gateway usage")}},Oe=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=new URLSearchParams;if(a){const{cid:r,gateway_domain:i,start_date:o,end_date:u,file_name:p,user_agent:x,country:l,region:f,referer:w,limit:c,sort_order:m,date_interval:y,sort_by:k}=a;r&&e.append("cid",r),i&&e.append("gateway_domain",i),o&&e.append("start_date",o),u&&e.append("end_date",u),p&&e.append("file_name",p),x&&e.append("user_agent",x.toString()),l&&e.append("country",l.toString()),f&&e.append("region",f),w&&e.append("referer",w.toString()),c&&e.append("limit",c.toString()),m&&e.append("sort_order",m),k&&e.append("sort_by",k),y&&e.append("by",y)}let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);const s=`${n}/ipfs/gateway_analytics_time_series?${e.toString()}`;try{let r;t.customHeaders&&Object.keys(t.customHeaders).length>0?r={...t.customHeaders}:r={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/analyticsDateInterval"};const i=await fetch(s,{method:"GET",headers:r});if(!i.ok){const p=await i.text();throw i.status===401||i.status===403?new b(`Authentication failed: ${p}`,i.status,p):new g(`HTTP error: ${p}`,i.status,p)}return(await i.json()).data}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing anaytics usage: ${r.message}`):new d("An unknown error occurred while fetching gateway usage")}},Ge=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const e=JSON.stringify({swap_cid:a.swapCid});let n;t.customHeaders&&Object.keys(t.customHeaders).length>0?n={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:n={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/swapCid"};let s="https://api.pinata.cloud/v3";t.endpointUrl&&(s=t.endpointUrl);try{const r=await fetch(`${s}/files/swap/${a.cid}`,{method:"PUT",headers:n,body:e});if(!r.ok){const u=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${u}`,r.status,u):r.status===403?new d("Unauthorized CID Swap",r.status,u):r.status===404?new d("CID not pinned to account",r.status,u):new g(`HTTP error: ${u}`,r.status,u)}return(await r.json()).data}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing CID Swap: ${r.message}`):new d("An unknown error occurred while swapping CID")}},Le=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/swapHistory"};let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);try{const s=await fetch(`${n}/files/swap/${a.cid}?domain=${a.domain}`,{method:"GET",headers:e});if(!s.ok){const o=await s.text();throw s.status===401||s.status===403?new b(`Authentication failed: ${o}`,s.status,o):s.status===404?new d("CID does not have history",s.status,o):new g(`HTTP error: ${o}`,s.status,o)}return(await s.json()).data}catch(s){throw s instanceof d?s:s instanceof Error?new d(`Error fetching swap history: ${s.message}`):new d("An unknown error occurred while fetching swap history")}},Re=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",Source:"sdk/deleteSwap"};let n="https://api.pinata.cloud/v3";t.endpointUrl&&(n=t.endpointUrl);try{const s=await fetch(`${n}/files/swap/${a}`,{method:"DELETE",headers:e});if(!s.ok){const r=await s.text();throw s.status===401||s.status===403?new b(`Authentication failed: ${r}`,s.status,r):s.status===403?new d("Unauthorized CID Swap Deletion",s.status,r):s.status===404?new d("CID not pinned to account",s.status,r):new g(`HTTP error: ${r}`,s.status,r)}return s.statusText}catch(s){throw s instanceof d?s:s instanceof Error?new d(`Error processing deleteSwap: ${s.message}`):new d("An unknown error occurred while deleting swap")}},Fe=async(t,a,e)=>{if(!t)throw new T("Pinata configuration is missing");let n;a!=null&&a.gateway?n=a.gateway.startsWith("https://")?a.gateway:`https://${a.gateway}`:n=t.pinataGateway;let s=`${n}/files/${a.cid}`;const r=new URLSearchParams;e&&(e.width&&r.append("img-width",e.width.toString()),e.height&&r.append("img-height",e.height.toString()),e.dpr&&r.append("img-dpr",e.dpr.toString()),e.fit&&r.append("img-fit",e.fit),e.gravity&&r.append("img-gravity",e.gravity),e.quality&&r.append("img-quality",e.quality.toString()),e.format&&r.append("img-format",e.format),e.animation!==void 0&&r.append("img-anim",e.animation.toString()),e.sharpen&&r.append("img-sharpen",e.sharpen.toString()),e.onError===!0&&r.append("img-onerror","redirect"),e.metadata&&r.append("img-metadata",e.metadata));const i=r.toString();i&&(s+=`?${i}`);const o=(a==null?void 0:a.date)||Math.floor(new Date().getTime()/1e3),u=JSON.stringify({url:s,date:o,expires:a.expires,method:"GET"});let p="https://api.pinata.cloud/v3";t.endpointUrl&&(p=t.endpointUrl);let x;t.customHeaders&&Object.keys(t.customHeaders).length>0?x={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:x={"Content-Type":"application/json",Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/createSignURL"};try{const l=await fetch(`${p}/files/sign`,{method:"POST",headers:x,body:u});if(!l.ok){const w=await l.text();throw l.status===401||l.status===403?new b(`Authentication Failed: ${w}`,l.status,w):new g(`HTTP error: ${w}`,l.status,w)}return(await l.json()).data}catch(l){throw l instanceof d?l:l instanceof Error?new d(`Error processing createSignedURL: ${l.message}`):new d("An unknown error occurred while getting signed url")}},Ne=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/vectorizeFile"};let n="https://uploads.pinata.cloud/v3";t.uploadUrl&&(n=t.uploadUrl);try{const s=await fetch(`${n}/vectorize/files/${a}`,{method:"POST",headers:e});if(!s.ok){const i=await s.text();throw s.status===401||s.status===403?new b(`Authentication failed: ${i}`,s.status,i):new g(`HTTP error: ${i}`,s.status,i)}return await s.json()}catch(s){throw s instanceof d?s:s instanceof Error?new d(`Error processing vectorize file: ${s.message}`):new d("An unknown error occurred while vectorizing file")}},Me=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/vectorQuery"};let n="https://uploads.pinata.cloud/v3";t.uploadUrl&&(n=t.uploadUrl);const s=JSON.stringify({text:a.query});try{const r=await fetch(`${n}/vectorize/groups/${a.groupId}/query`,{method:"POST",headers:e,body:s});if(!r.ok){const u=await r.text();throw r.status===401||r.status===403?new b(`Authentication failed: ${u}`,r.status,u):new g(`HTTP error: ${u}`,r.status,u)}const o=(await r.json()).data;if(a.returnFile){if(o.matches.length===0)throw new d("No files returned in query to fetch");const u=o.matches[0].cid;return await Wt(t,u,void 0)}return o}catch(r){throw r instanceof d?r:r instanceof Error?new d(`Error processing vectorize file: ${r.message}`):new d("An unknown error occurred while vectorizing file")}},Ke=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");let e;t.customHeaders&&Object.keys(t.customHeaders).length>0?e={Authorization:`Bearer ${t.pinataJwt}`,...t.customHeaders}:e={Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/vectorizeFile"};let n="https://uploads.pinata.cloud/v3";t.uploadUrl&&(n=t.uploadUrl);try{const s=await fetch(`${n}/vectorize/files/${a}`,{method:"DELETE",headers:e});if(!s.ok){const i=await s.text();throw s.status===401||s.status===403?new b(`Authentication failed: ${i}`,s.status,i):new g(`HTTP error: ${i}`,s.status,i)}return await s.json()}catch(s){throw s instanceof d?s:s instanceof Error?new d(`Error processing vectorize file: ${s.message}`):new d("An unknown error occurred while vectorizing file")}},We=async(t,a)=>{if(!t)throw new T("Pinata configuration is missing");const n={date:(a==null?void 0:a.date)||Math.floor(new Date().getTime()/1e3),expires:a.expires};a.groupId&&(n.group_id=a.groupId),a.name&&(n.filename=a.name),a.keyvalues&&(n.keyvalues=a.keyvalues);let s="https://uploads.pinata.cloud/v3";t.uploadUrl&&(s=t.uploadUrl);let r;t.customHeaders&&Object.keys(t.customHeaders).length>0?r={Authorization:`Bearer ${t.pinataJwt}`,"Content-Type":"application/json",...t.customHeaders}:r={"Content-Type":"application/json",Authorization:`Bearer ${t.pinataJwt}`,Source:"sdk/createSignURL"};try{const i=await fetch(`${s}/files/sign`,{method:"POST",headers:r,body:JSON.stringify(n)});if(!i.ok){const u=await i.text();throw i.status===401||i.status===403?new b(`Authentication Failed: ${u}`,i.status,u):new g(`HTTP error: ${u}`,i.status,u)}return(await i.json()).data}catch(i){throw i instanceof d?i:i instanceof Error?new d(`Error processing createSignedURL: ${i.message}`):new d("An unknown error occurred while getting signed url")}},st=t=>{let a=t==null?void 0:t.pinataGateway;return t&&a&&(a&&!a.startsWith("https://")&&(a=`https://${a}`),t.pinataGateway=a),t},Ve=class{constructor(t){this.config=st(t),this.files=new Qe(this.config),this.upload=new Ye(this.config),this.gateways=new Xe(this.config),this.keys=new rr(this.config),this.groups=new sr(this.config),this.analytics=new nr(this.config)}setNewHeaders(t){this.config||(this.config={pinataJwt:"",customHeaders:{}}),this.config.customHeaders={...this.config.customHeaders,...t},this.files.updateConfig(this.config),this.upload.updateConfig(this.config),this.gateways.updateConfig(this.config),this.keys.updateConfig(this.config),this.groups.updateConfig(this.config),this.analytics.updateConfig(this.config)}setNewJwt(t){this.config||(this.config={pinataJwt:""}),this.config.pinataJwt=t,this.files.updateConfig(this.config),this.upload.updateConfig(this.config),this.gateways.updateConfig(this.config),this.keys.updateConfig(this.config),this.groups.updateConfig(this.config),this.analytics.updateConfig(this.config)}testAuthentication(){return ve(this.config)}},Qe=class{constructor(t){this.config=st(t)}updateConfig(t){this.config=t}list(){return new Ze(this.config)}delete(t){return Ae(this.config,t)}update(t){return He(this.config,t)}addSwap(t){return Ge(this.config,t)}getSwapHistory(t){return Le(this.config,t)}deleteSwap(t){return Re(this.config,t)}vectorize(t){return Ne(this.config,t)}queryVectors(t){return Me(this.config,t)}deleteVectors(t){return Ke(this.config,t)}},Ut=class{constructor(t,a,...e){this.config=t,this.uploadFunction=a,this.args=e}addMetadata(t){return this.metadata=t,this}key(t){return this.keys=t,this}vectorize(){return this.vector=!0,this}url(t){return this.uploadUrl=t,this}group(t){return this.groupId=t,this}then(t,a){const e=this.args[this.args.length-1]||{};return this.metadata&&(e.metadata=this.metadata),this.keys&&(e.keys=this.keys),this.groupId&&(e.groupId=this.groupId),this.vector&&(e.vectorize=this.vector),this.uploadUrl&&(e.url=this.uploadUrl),this.args[this.args.length-1]=e,this.uploadFunction(this.config,...this.args).then(t,a)}},Ye=class{constructor(t){this.config=st(t)}updateConfig(t){this.config=t}file(t,a){return new Ut(this.config,ke,t,a)}base64(t,a){return new Ut(this.config,$e,t,a)}url(t,a){return new Ut(this.config,be,t,a)}json(t,a){return new Ut(this.config,Te,t,a)}createSignedURL(t){return We(this.config,t)}},Ze=class{constructor(t){this.query={},this.config=t}name(t){return this.query.name=t,this}group(t){return this.query.group=t,this}cid(t){return this.query.cid=t,this}mimeType(t){return this.query.mimeType=t,this}order(t){return this.query.order=t,this}limit(t){return this.query.limit=t,this}cidPending(t){return this.query.cidPending=t,this}metadata(t){return this.query.metadata=t,this}noGroup(t){return this.query.noGroup=t,this}pageToken(t){return this.query.pageToken=t,this}then(t){return this.fetchPage().then(t)}async fetchPage(){this.currentPageToken&&(this.query.pageToken=this.currentPageToken);const t=await Se(this.config,this.query);return this.currentPageToken=t.next_page_token,t}async*[Symbol.asyncIterator](){for(;;){const t=await this.fetchPage();for(const a of t.files)yield a;if(!this.currentPageToken)break}}async all(){const t=[];for await(const a of this)t.push(a);return t}},Xe=class{constructor(t){this.config=st(t)}updateConfig(t){this.config=t}get(t){return new tr(this.config,t)}createSignedURL(t){return new er(this.config,t)}},tr=class{constructor(t,a){this.options={},this.config=t,this.cid=a}optimizeImage(t){return this.options={...this.options,...t},this}then(t){return Wt(this.config,this.cid,this.options).then(t)}},er=class{constructor(t,a){this.imgOpts={},this.config=t,this.urlOpts=a}optimizeImage(t){return this.imgOpts={...this.imgOpts,...t},this}then(t){return Fe(this.config,this.urlOpts,this.imgOpts).then(t)}},rr=class{constructor(t){this.config=st(t)}updateConfig(t){this.config=t}create(t){return Pe(this.config,t)}list(){return new ar(this.config)}revoke(t){return je(this.config,t)}},ar=class{constructor(t){this.query={},this.config=t}offset(t){return this.query.offset=t,this}revoked(t){return this.query.revoked=t,this}limitedUse(t){return this.query.limitedUse=t,this}exhausted(t){return this.query.exhausted=t,this}name(t){return this.query.name=t,this}then(t){return Kt(this.config,this.query).then(t)}async*[Symbol.asyncIterator](){let t=!0,a=0;for(;t;){this.query.offset=a;const e=await Kt(this.config,this.query);for(const n of e)yield n;e.length===0?t=!1:a+=e.length}}async all(){const t=[];for await(const a of this)t.push(a);return t}},sr=class{constructor(t){this.config=st(t)}updateConfig(t){this.config=t}create(t){return Ue(this.config,t)}list(){return new ir(this.config)}get(t){return De(this.config,t)}addFiles(t){return Ee(this.config,t)}removeFiles(t){return Be(this.config,t)}update(t){return Ce(this.config,t)}delete(t){return Je(this.config,t)}},ir=class{constructor(t){this.query={},this.config=t}name(t){return this.query.name=t,this}limit(t){return this.query.limit=t,this}isPublic(t){return this.query.isPublic=t,this}pageToken(t){return this.query.pageToken=t,this}then(t){return this.fetchPage().then(a=>(this.nextPageToken=a.next_page_token,a)).then(t)}async fetchPage(){return this.nextPageToken&&(this.query.pageToken=this.nextPageToken),ze(this.config,this.query)}async*[Symbol.asyncIterator](){for(;;){const t=await this.fetchPage();for(const a of t.groups)yield a;if(!t.next_page_token)break;this.nextPageToken=t.next_page_token}}async all(){const t=[];for await(const a of this)t.push(a);return t}},nr=class{constructor(t){this.config=st(t),this.requests=new ur(this.config),this.bandwidth=new dr(this.config)}updateConfig(t){this.config=t,this.requests.updateConfig(t),this.bandwidth.updateConfig(t)}summary(t){return new lr(this.config,t.domain,t.start,t.end,t.interval)}},or=t=>{const a=new Date,e=new Date;return e.setDate(e.getDate()-t),{start:e.toISOString().split("T")[0],end:a.toISOString().split("T")[0]}},Vt=class{constructor(t,a,e,n){this.config=t,this.query={gateway_domain:a,start_date:e,end_date:n,sort_by:"requests",attribute:"cid"}}cid(t){return this.query.attribute="cid",t&&(this.query.cid=t),this}fileName(t){return this.query.attribute="file_name",t&&(this.query.file_name=t),this}userAgent(t){return this.query.attribute="user_agent",t&&(this.query.user_agent=t),this}country(t){return this.query.attribute="country",t&&(this.query.country=t),this}region(t){return this.query.attribute="region",t&&(this.query.region=t),this}referer(t){return this.query.attribute="referer",t&&(this.query.referer=t),this}limit(t){return this.query.limit=t,this}sort(t){return this.query.sort_order=t,this}days(t){const{start:a,end:e}=or(t);return this.query.start_date=a,this.query.end_date=e,this}then(t){return Ie(this.config,this.query).then(t)}},ur=class extends Vt{constructor(t){super(t,"","",""),this.query.sort_by="requests"}updateConfig(t){this.config=t}customDates(t,a){return t&&(this.query.start_date=t),a&&(this.query.end_date=a),this}from(t){return this.query.gateway_domain=t,this}},dr=class extends Vt{constructor(t){super(t,"","",""),this.query.sort_by="bandwidth"}updateConfig(t){this.config=t}customDates(t,a){return t&&(this.query.start_date=t),a&&(this.query.end_date=a),this}from(t){return this.query.gateway_domain=t,this}},cr=class{constructor(t,a){this.requestCount=0,this.lastRequestTime=0,this.MAX_REQUESTS_PER_MINUTE=30,this.MINUTE_IN_MS=6e4,this.config=t,this.query=a}cid(t){return this.query.cid=t,this}fileName(t){return this.query.file_name=t,this}userAgent(t){return this.query.user_agent=t,this}country(t){return this.query.country=t,this}region(t){return this.query.region=t,this}referer(t){return this.query.referer=t,this}limit(t){return this.query.limit=t,this}sort(t){return this.query.sort_order=t,this}async getAnalytics(){throw new Error("getAnalytics method must be implemented in derived class")}then(t){return this.getAnalytics().then(t)}},lr=class extends cr{constructor(t,a,e,n,s){super(t,{gateway_domain:a,start_date:e,end_date:n,date_interval:s})}sortBy(t){return this.query.sort_by=t,this}async getAnalytics(){return Oe(this.config,this.query)}async all(){return this.getAnalytics()}},hr=G('<div class=" w-full h-full absolute top-[4%] z-10"><h5 class="semiBold text-[14px] mb-[4%] relative left-[5%] dark:text-[#FF85C2] text-[#EB3438]">Wallet Not Connected!</h5> <div class="w-[97%] border mx-auto px-[28px] py-[19px] dark:border-action border-secondary rounded-[10px] h-[100px]"><p class="font-medium text-xs">Connect Your Wallet</p> <button class="h-[36px] mx-auto w-[100%] primary-button mt-[5%]"><a href="/Onboarding">Connect</a></button></div></div>'),wr=G('<option class="font-medium text-black"> </option>'),pr=G('<option class="font-medium text-black"> </option>'),fr=G('<option class="font-medium text-black"> </option>'),mr=G('<form class="relative flex flex-col justify-start flex-grow text-black dark:text-white"><div class="flex items-center mx-auto w-[85%] mt-[17%] mb-[10%] gap-4"><a class="hover:-translate-x-[2px] duration-300" href="/"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="fill-[#263238] dark:fill-[#11D9C5]"><path d="M16.6205 2.98833C16.5044 2.87192 16.3664 2.77956 16.2146 2.71655C16.0627 2.65353 15.8999 2.62109 15.7355 2.62109C15.5711 2.62109 15.4083 2.65353 15.2564 2.71655C15.1045 2.77956 14.9666 2.87192 14.8505 2.98833L6.54049 11.2983C6.44779 11.3908 6.37424 11.5007 6.32406 11.6217C6.27388 11.7427 6.24805 11.8724 6.24805 12.0033C6.24805 12.1343 6.27388 12.264 6.32406 12.385C6.37424 12.5059 6.44779 12.6158 6.54049 12.7083L14.8505 21.0183C15.3405 21.5083 16.1305 21.5083 16.6205 21.0183C17.1105 20.5283 17.1105 19.7383 16.6205 19.2483L9.38049 11.9983L16.6305 4.74833C17.1105 4.26833 17.1105 3.46833 16.6205 2.98833Z"></path></svg></a> <h1 class="semiBold leading-none text-[24px] capitalize">share your reviews</h1></div> <div class="flex flex-col gap-[16px]"><div id="websiteUrl" class="text-xs w-[80%] mx-auto text-gray-400 bg-transparent border flex items-center border-[#263238] dark:border-[#11D9C5] h-[36px] px-3 rounded-[50px]"> </div> <div class="w-full relative items-center flex justify-center"><div class="absolute primary-input flex justify-between items-center mx-auto border px-4 w-[80%]"><p> </p> <!></div> <select id="siteTag" class="select z-10 opacity-0 text-white/0 dark:text-dark/0 primary-input" required></select></div> <div class="w-full relative items-center flex justify-center"><div class="absolute primary-input flex justify-between items-center mx-auto border px-4 w-[80%]"><p> </p> <!></div> <select id="rating" class="select z-10 opacity-0 text-white/0 dark:text-dark/0 primary-input" required></select></div>  <input id="title" type="text" placeholder="Title" class="input primary-input focus:outline-none" required>  <div class="w-full relative items-center flex justify-center"><div class="absolute primary-input flex justify-between items-center mx-auto border px-4 w-[80%]"><p> </p> <!></div> <select id="siteType" class="select opacity-0 primary-input" required></select></div></div> <div class="absolute w-[80%] mx-auto flex flex-col gap-[29px] bottom-[5%] self-center"><div class="flex justify-center items-center gap-[8px]"><button></button> <button></button></div> <button type="submit" class="h-[36px] mx-auto w-[100%] primary-button">Next</button></div></form>'),yr=(t,a)=>H(a,1),gr=G('<option class="font-medium text-black"> </option>'),vr=G('<option class="font-medium text-black"> </option>'),xr=G('<p class="text-xs mx-auto text-red-400"> </p>'),kr=(t,a)=>H(a,1),$r=(t,a)=>H(a,2),br=G('<form class="relative flex flex-col justify-start flex-grow text-black dark:text-white"><div class="flex items-center mx-auto w-[85%] mt-[17%] mb-[10%] gap-4"><button class="hover:-translate-x-[2px] duration-300"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="fill-[#263238] dark:fill-[#11D9C5]"><path d="M16.6205 2.98833C16.5044 2.87192 16.3664 2.77956 16.2146 2.71655C16.0627 2.65353 15.8999 2.62109 15.7355 2.62109C15.5711 2.62109 15.4083 2.65353 15.2564 2.71655C15.1045 2.77956 14.9666 2.87192 14.8505 2.98833L6.54049 11.2983C6.44779 11.3908 6.37424 11.5007 6.32406 11.6217C6.27388 11.7427 6.24805 11.8724 6.24805 12.0033C6.24805 12.1343 6.27388 12.264 6.32406 12.385C6.37424 12.5059 6.44779 12.6158 6.54049 12.7083L14.8505 21.0183C15.3405 21.5083 16.1305 21.5083 16.6205 21.0183C17.1105 20.5283 17.1105 19.7383 16.6205 19.2483L9.38049 11.9983L16.6305 4.74833C17.1105 4.26833 17.1105 3.46833 16.6205 2.98833Z"></path></svg></button> <h1 class="semiBold leading-none text-[24px] capitalize">share your reviews</h1></div> <div class="flex flex-col gap-[16px] ml-3"><div class="w-full relative items-center flex justify-center"><div class="absolute primary-input flex justify-between items-center mx-auto border px-4 w-[80%]"><p> </p> <!></div> <select id="siteTag" class="select opacity-0 primary-input" required></select></div> <div class="w-full relative items-center flex justify-center"><div class="absolute primary-input flex justify-between items-center mx-auto border px-4 w-[80%]"><p> </p> <!></div> <select id="siteSafety" class="select opacity-0 primary-input" required></select></div> <div class="w-max mx-auto h-max relative"><p class="absolute bottom-3 right-4 text-appGray dark:text-appGray text-[10px]">Max. 50 words</p> <textarea id="description" placeholder="Additional Feedback" class="textarea textarea-success resize-none primary-input h-[126px] w-[282px] focus:outline-none rounded-[20px]" required></textarea></div></div> <!> <div class="absolute w-[80%] flex flex-col gap-[29px] bottom-[5%] self-center"><div class="flex justify-center items-center gap-[8px]"><button></button> <button></button></div> <button type="submit" class="h-[36px] text-sm w-full primary-button">Submit</button></div></form>'),Tr=G('<div class="h-[460px] text-center flex flex-col items-center justify-center gap-4"><img src="/good.svg" alt="good"> <h1 class="text-black dark:text-white text-xl text-center font-bold">Successfully submitted!</h1> <a href="/" class="w-full"><button class="w-[200px] primary-button">Home</button></a></div>'),_r=G("<div><!> <div><!> <!></div></div>");function Nr(t,a){se(a,!0);const e=new Ve({pinataJwt:`${ge}`,pinataGateway:`${ye}`});let n=D(1),s=D(void 0),r=D(void 0),i="https://google.com",o=D("https://google.com"),u=D(""),p=D(""),x=D(""),l=D(""),f="ipfs://bafybeica7pi67452fokrlrmxrooazsxbuluckmcojascc5z4fcazsuhsuy",w=D(!1),c=D(!1),m=D(!1),y=D(0),k,B=D(""),K=[{text:"Category",disabled:!0,selected:!1},{text:"Tooling"},{text:"Infra"},{text:"Bridges"},{text:"Launchpads"},{text:"Social"},{text:"Marketplaces"},{text:"Wallets"},{text:"Stablecoins"},{text:"NFT Tooling"},{text:"Gaming"},{text:"DeFi"}],V=[{text:"Safety",disabled:!0,selected:!1},{text:"Safe"},{text:"Mostly Safe"},{text:"Adware Issues"},{text:"Malware Threats"},{text:"Spyware Risks"},{text:"Phishing Concerns"}],it=[{text:"Tag",disabled:!0,selected:!1},{text:"Genuine"},{text:"Abandoned"},{text:"Scam"},{text:"Fake"},{text:"Unsure"}],W=[{text:"Type",disabled:!0,selected:!1},{text:"Website"},{text:"Mobile App"},{text:"Browser Extension"},{text:"Software"}],lt=[{text:"Rating",selected:!1,disabled:!0},{text:1},{text:2},{text:3},{text:4},{text:5},{text:6},{text:7},{text:8},{text:9},{text:10}],Ot=D(void 0);me.subscribe(A=>H(Ot,A,!0));const nt=async()=>{try{chrome.tabs.captureVisibleTab(chrome.windows.WINDOW_ID_CURRENT,{format:"png"},async A=>{const St=await(await fetch(A)).blob(),wt=new File([St],`screenshot-${Date.now()}.png`,{type:"image/png"});f=(await e.upload.file(wt)).cid})}catch(A){console.error("Error capturing screenshot:",A)}},ht=async()=>{var L;const[A]=await chrome.tabs.query({active:!0,currentWindow:!0});i=(L=A.url)==null?void 0:L.toLocaleLowerCase(),H(o,new URL(i).origin.toLocaleLowerCase(),!0)},_t=async()=>{H(m,!0);const A=new URL(`${i}`).hostname;let L={name:h(s)??"",description:h(r)??"",category:h(u)??"",image:f??"",domainAddress:A??"",siteUrl:h(o)??"",siteType:h(l)??"",siteTag:h(p)??"",siteSafety:h(x)??"",siteRating:h(y)??""},wt=`ipfs://${await ce(L)}`.split(",")[0];try{let J={category:h(u)??"",description:h(r)??"",domainAddress:A??"",siteUrl:h(o)??"",siteType:h(l)??"",siteTag:h(p)??"",siteSafety:h(x)??"",siteRating:h(y)??"",metaDataUri:wt,siteIpfsHash:"ipfs://abcd"};k=await le(J),H(m,!1)}catch(J){console.log("error: "+J),H(m,!1)}finally{H(m,!1),k.status===200&&(console.log("success"),H(c,!0)),k.error&&H(B,k.error,!0)}};he(async()=>{await(async A=>H(w,A[0],!0))(await we()),await ht(),await nt()});var At=_r();O(At,1,"h-full relative flex  flex-col");var Gt=$(At);{var Qt=A=>{var L=hr();E(A,L)};vt(Gt,A=>{h(w)||A(Qt)})}var zt=_(Gt,2),Lt=$(zt);fe(Lt,{});var Yt=_(Lt,2);{var Zt=A=>{pe(A)},Xt=(A,L)=>{{var St=J=>{var Ht=ae(),te=ne(Ht);{var ee=ot=>{var I=mr(),Q=_($(I),2),pt=$(Q),ft=$(pt,!0);v(pt);var Y=_(pt,2),Z=$(Y),R=$(Z),Dt=$(R,!0);v(R);var Et=_(R,2);bt(Et,{}),v(Z);var X=_(Z,2);xt(X,21,()=>K,kt,(q,S,N,jt)=>{var U=wr(),gt={},Jt=$(U,!0);v(U),M(()=>{gt!==(gt=h(S).text)&&(U.value=(U.__value=h(S).text)??""),$t(U,h(S).selected),U.disabled=h(S).disabled,C(Jt,h(S).text)}),E(q,U)}),v(X),v(Y);var tt=_(Y,2),et=$(tt),F=$(et),Ct=$(F,!0);v(F);var Bt=_(F,2);bt(Bt,{}),v(et);var rt=_(et,2);xt(rt,21,()=>lt,kt,(q,S,N,jt)=>{var U=pr(),gt={},Jt=$(U,!0);v(U),M(()=>{gt!==(gt=h(S).text)&&(U.value=(U.__value=h(S).text)??""),$t(U,h(S).selected),U.disabled=h(S).disabled,C(Jt,h(S).text)}),E(q,U)}),v(rt),v(tt);var ut=_(tt,2);oe(ut);var mt=_(ut,2),dt=$(mt),ct=$(dt),Pt=$(ct,!0);v(ct);var qt=_(ct,2);bt(qt,{}),v(dt);var at=_(dt,2);xt(at,21,()=>W,kt,(q,S)=>{var N=fr(),jt={},U=$(N,!0);v(N),M(()=>{jt!==(jt=h(S).text)&&(N.value=(N.__value=h(S).text)??""),$t(N,h(S).selected),N.disabled=h(S).disabled,C(U,h(S).text)}),E(q,N)}),v(at),v(mt),v(Q);var yt=_(Q,2),z=$(yt),j=$(z);O(j,1,"w-[10px] bg-secondary dark:bg-action dark:hover:border-action hover:border dark:hover:bg-transparent h-[10px] rounded-full");var P=_(j,2);O(P,1,"w-[10px] bg-transparent hover:bg-secondary dark:hover:bg-action border border-secondary dark:border-action h-[10px] rounded-full"),v(z),It(2),v(yt),v(I),M(()=>{C(ft,h(o)),O(R,1,`text-dark text-xs dark:text-white ${h(u)?"opacity-100":"opacity-50"}`),C(Dt,h(u)?h(u):"Category"),O(F,1,`text-dark text-xs dark:text-white ${h(y)?"opacity-100":"opacity-50"}`),C(Ct,h(y)?h(y):"Rating"),O(ct,1,`text-dark text-xs dark:text-white ${h(l)?"opacity-100":"opacity-50"}`),C(Pt,h(l)?h(l):"Type")}),Rt("submit",I,()=>H(n,2)),Tt(X,()=>h(u),q=>H(u,q)),Tt(rt,()=>h(y),q=>H(y,q)),Mt(ut,()=>h(s),q=>H(s,q)),Tt(at,()=>h(l),q=>H(l,q)),Ft(5,I,()=>Nt,()=>({duration:300})),E(ot,I)},re=ot=>{var I=br(),Q=$(I),pt=$(Q);pt.__click=[yr,n],It(2),v(Q);var ft=_(Q,2),Y=$(ft),Z=$(Y),R=$(Z),Dt=$(R,!0);v(R);var Et=_(R,2);bt(Et,{}),v(Z);var X=_(Z,2);xt(X,21,()=>it,kt,(z,j)=>{var P=gr(),q={},S=$(P,!0);v(P),M(()=>{q!==(q=h(j).text)&&(P.value=(P.__value=h(j).text)??""),$t(P,h(j).selected),P.disabled=h(j).disabled,C(S,h(j).text)}),E(z,P)}),v(X),v(Y);var tt=_(Y,2),et=$(tt),F=$(et),Ct=$(F,!0);v(F);var Bt=_(F,2);bt(Bt,{}),v(et);var rt=_(et,2);xt(rt,21,()=>V,kt,(z,j)=>{var P=vr(),q={},S=$(P,!0);v(P),M(()=>{q!==(q=h(j).text)&&(P.value=(P.__value=h(j).text)??""),$t(P,h(j).selected),P.disabled=h(j).disabled,C(S,h(j).text)}),E(z,P)}),v(rt),v(tt);var ut=_(tt,2),mt=_($(ut),2);de(mt),v(ut),v(ft);var dt=_(ft,2);{var ct=z=>{var j=xr(),P=$(j,!0);v(j),M(()=>C(P,h(B))),E(z,j)};vt(dt,z=>{h(B)&&z(ct)})}var Pt=_(dt,2),qt=$(Pt),at=$(qt);at.__click=[kr,n],O(at,1,"w-[10px] bg-transparent hover:bg-secondary dark:hover:bg-action border border-secondary dark:border-action h-[10px] rounded-full");var yt=_(at,2);yt.__click=[$r,n],O(yt,1,"w-[10px] bg-secondary dark:bg-action dark:hover:border-action hover:border dark:hover:bg-transparent h-[10px] rounded-full"),v(qt),It(2),v(Pt),v(I),M(()=>{O(R,1,`text-dark text-xs dark:text-white ${h(p)?"opacity-100":"opacity-50"}`),C(Dt,h(p)?h(p):"Tag"),O(F,1,`text-dark text-xs dark:text-white ${h(x)?"opacity-100":"opacity-50"}`),C(Ct,h(x)?h(x):"Safety")}),Rt("submit",I,_t),Tt(X,()=>h(p),z=>H(p,z)),Tt(rt,()=>h(x),z=>H(x,z)),Mt(mt,()=>h(r),z=>H(r,z)),Ft(5,I,()=>Nt,()=>({duration:300})),E(ot,I)};vt(te,ot=>{h(n)===1?ot(ee):ot(re,!1)})}E(J,Ht)},wt=J=>{var Ht=Tr();E(J,Ht)};vt(A,J=>{h(c)?J(wt,!1):J(St)},L)}};vt(Yt,A=>{h(m)?A(Zt):A(Xt,!1)})}return v(zt),v(At),M(()=>O(zt,1,`h-full flex ${h(w)?"opacity-100":"opacity-10"} flex-col`)),E(t,At),ie({pinata:e})}ue(["click"]);export{Nr as component};
